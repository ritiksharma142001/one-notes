"use strict";(globalThis.webpackChunkes_note=globalThis.webpackChunkes_note||[]).push([[4931],{28453(e,n,o){o.d(n,{R:()=>r,x:()=>s});var t=o(96540);const i={},l=t.createContext(i);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}},80938(e,n,o){o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"advanced-java/0-1/Week-2/2.7","title":"Exception Handling In Spring Boot MVC","description":"Introduction","source":"@site/docs/advanced-java/0-1/Week-2/2.7.md","sourceDirName":"advanced-java/0-1/Week-2","slug":"/advanced-java/0-1/Week-2/2.7","permalink":"/one-notes/advanced-java/0-1/Week-2/2.7","draft":false,"unlisted":false,"editUrl":"https://github.com/ritiksharma142001/one-notes/edit/main/docs/advanced-java/0-1/Week-2/2.7.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Input Validation","permalink":"/one-notes/advanced-java/0-1/Week-2/2.6"},"next":{"title":"Transforming API Response","permalink":"/one-notes/advanced-java/0-1/Week-2/2.8"}}');var i=o(74848),l=o(28453);const r={sidebar_position:7},s="Exception Handling In Spring Boot MVC",a={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisite: Core Java Exception Handling",id:"prerequisite-core-java-exception-handling",level:2},{value:"Why Do We Need Exception Handling in Spring Boot?",id:"why-do-we-need-exception-handling-in-spring-boot",level:2},{value:"Handle Invalid User Input",id:"handle-invalid-user-input",level:3},{value:"Handle Resource Not Found",id:"handle-resource-not-found",level:3},{value:"Handle Server-Side Errors",id:"handle-server-side-errors",level:3},{value:"Benefits of Exception Handling",id:"benefits-of-exception-handling",level:2},{value:"Prevent Application Crashes",id:"prevent-application-crashes",level:3},{value:"Provide User-Friendly Error Responses",id:"provide-user-friendly-error-responses",level:3},{value:"Improve Error Debugging and Maintenance",id:"improve-error-debugging-and-maintenance",level:3},{value:"Enable Consistent Error Handling Across the Application",id:"enable-consistent-error-handling-across-the-application",level:3},{value:"Exception Handling in Spring Boot Using @ExceptionHandler",id:"exception-handling-in-spring-boot-using-exceptionhandler",level:2},{value:"Using @ExceptionHandler Annotation",id:"using-exceptionhandler-annotation",level:3},{value:"Scenario: Handling Exception When Employee Not Found",id:"scenario-handling-exception-when-employee-not-found",level:3},{value:"Example: Creating a Local Exception Handler in Controller",id:"example-creating-a-local-exception-handler-in-controller",level:3},{value:"Modify the Service/Controller Code to Throw Exception",id:"modify-the-servicecontroller-code-to-throw-exception",level:3},{value:"Important Note: Response Should Include Proper Status Code",id:"important-note-response-should-include-proper-status-code",level:3},{value:"Output Behavior",id:"output-behavior",level:3},{value:"Limitation of Local Exception Handler",id:"limitation-of-local-exception-handler",level:3},{value:"Global Exception Handling in Spring Boot Using @RestControllerAdvice",id:"global-exception-handling-in-spring-boot-using-restcontrolleradvice",level:2},{value:"Why Global Exception Handling?",id:"why-global-exception-handling",level:3},{value:"Limitations of Local @ExceptionHandler",id:"limitations-of-local-exceptionhandler",level:3},{value:"Creating a Global Exception Handler",id:"creating-a-global-exception-handler",level:3},{value:"Moving Existing Handler to Global Handler",id:"moving-existing-handler-to-global-handler",level:3},{value:"Updating Method Name and Message",id:"updating-method-name-and-message",level:3},{value:"Verifying the Handler",id:"verifying-the-handler",level:3},{value:"Enhancing Global Exception Handling with Custom ApiError Object",id:"enhancing-global-exception-handling-with-custom-apierror-object",level:2},{value:"Why Return a Custom Error Object?",id:"why-return-a-custom-error-object",level:3},{value:"Create a Custom Error Class ApiError",id:"create-a-custom-error-class-apierror",level:3},{value:"Update the Global Exception Handler to Use ApiError",id:"update-the-global-exception-handler-to-use-apierror",level:3},{value:"Benefits of This Approach",id:"benefits-of-this-approach",level:3},{value:"code",id:"code",level:3},{value:"Creating and Using Custom Exceptions in Spring Boot",id:"creating-and-using-custom-exceptions-in-spring-boot",level:2},{value:"Why Create a Custom Exception?",id:"why-create-a-custom-exception",level:3},{value:"Define a Custom Exception: <code>ResourceNotFoundException</code>",id:"define-a-custom-exception-resourcenotfoundexception",level:3},{value:"Use ResourceNotFoundException in the Controller",id:"use-resourcenotfoundexception-in-the-controller",level:3},{value:"Update the Global Exception Handler",id:"update-the-global-exception-handler",level:3},{value:"Result of This Approach",id:"result-of-this-approach",level:3},{value:"code",id:"code-1",level:3},{value:"Custom Exception Handling During Update in Spring Boot",id:"custom-exception-handling-during-update-in-spring-boot",level:2},{value:"Apply Custom Exception Handling to Update Operation",id:"apply-custom-exception-handling-to-update-operation",level:3},{value:"Validate Employee ID Before Updating",id:"validate-employee-id-before-updating",level:3},{value:"Existing Issue in Code- Currently, DTO is being converted to an entity, and the ID is set even if the employee does not exist.",id:"existing-issue-in-code--currently-dto-is-being-converted-to-an-entity-and-the-id-is-set-even-if-the-employee-does-not-exist",level:3},{value:"Fix Implementation Logic",id:"fix-implementation-logic",level:3},{value:"Exception Message Example",id:"exception-message-example",level:3},{value:"Validate DTO Input: Role Validator Fix",id:"validate-dto-input-role-validator-fix",level:3},{value:"Retesting the API",id:"retesting-the-api",level:3},{value:"final code",id:"final-code",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"exception-handling-in-spring-boot-mvc",children:"Exception Handling In Spring Boot MVC"})}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In this session, we will learn an important and interesting concept \u2014 Exception Handling in Spring Boot MVC."}),"\n",(0,i.jsx)(n.li,{children:"It is crucial to understand exception handling in core Java first. That forms the foundation for handling exceptions effectively in Spring Boot MVC."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisite-core-java-exception-handling",children:"Prerequisite: Core Java Exception Handling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Make sure you understand the following concepts in Java:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Creating and throwing custom exceptions."}),"\n",(0,i.jsx)(n.li,{children:"Using try-catch blocks to handle exceptions."}),"\n",(0,i.jsx)(n.li,{children:"Propagating exceptions when necessary."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"why-do-we-need-exception-handling-in-spring-boot",children:"Why Do We Need Exception Handling in Spring Boot?"}),"\n",(0,i.jsx)(n.h3,{id:"handle-invalid-user-input",children:"Handle Invalid User Input"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"While validating user input, if a user sends invalid data, we must inform them clearly about what's wrong."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Without proper exception handling, the API might fail without providing meaningful feedback to the user."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"handle-resource-not-found",children:"Handle Resource Not Found"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"For example, if a user tries to fetch an employee by ID, and that ID doesn\u2019t exist in the database:"}),"\n",(0,i.jsx)(n.li,{children:"We should return a 404 Not Found error with a meaningful message like \u201cEmployee with ID X not found\u201d."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"handle-server-side-errors",children:"Handle Server-Side Errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If the issue is internal (e.g., a server error), we must still inform the user gracefully."}),"\n",(0,i.jsx)(n.li,{children:"This helps users understand what went wrong and whether the problem is on their side or the server's."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"benefits-of-exception-handling",children:"Benefits of Exception Handling"}),"\n",(0,i.jsx)(n.h3,{id:"prevent-application-crashes",children:"Prevent Application Crashes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Runtime exceptions like ArithmeticException (e.g., divide by zero) can crash the application if not handled."}),"\n",(0,i.jsx)(n.li,{children:"Use try-catch blocks to gracefully handle such exceptions."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"provide-user-friendly-error-responses",children:"Provide User-Friendly Error Responses"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Without exception handling, validation failures only return generic error responses like 400 Bad Request."}),"\n",(0,i.jsx)(n.li,{children:'With proper exception handling, we can return structured and detailed messages (e.g., "Name must be between 3 to 10 characters").'}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"improve-error-debugging-and-maintenance",children:"Improve Error Debugging and Maintenance"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Exception handling allows you to log errors."}),"\n",(0,i.jsx)(n.li,{children:"If the same error occurs frequently, logs can help trace and debug issues efficiently."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"enable-consistent-error-handling-across-the-application",children:"Enable Consistent Error Handling Across the Application"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Using centralized exception handling (e.g., @ControllerAdvice in Spring Boot), we can standardize the error response structure throughout the application."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"exception-handling-in-spring-boot-using-exceptionhandler",children:"Exception Handling in Spring Boot Using @ExceptionHandler"}),"\n",(0,i.jsx)(n.h3,{id:"using-exceptionhandler-annotation",children:"Using @ExceptionHandler Annotation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Spring provides the ",(0,i.jsx)(n.code,{children:"@ExceptionHandler"})," annotation to handle exceptions in your controller."]}),"\n",(0,i.jsxs)(n.li,{children:["It allows you to define custom exception handling methods for either:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A specific controller, or"}),"\n",(0,i.jsxs)(n.li,{children:["Globally across the application (with ",(0,i.jsx)(n.code,{children:"@ControllerAdvice"}),", explained later)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"scenario-handling-exception-when-employee-not-found",children:"Scenario: Handling Exception When Employee Not Found"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Suppose you're trying to fetch an employee by ID."}),"\n",(0,i.jsxs)(n.li,{children:["If the employee with the given ID is not found, instead of returning a default 404 or null, we can:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Throw a custom or predefined exception, such as ",(0,i.jsx)(n.code,{children:"NoSuchElementException"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Handle that exception using a method annotated with ",(0,i.jsx)(n.code,{children:"@ExceptionHandler"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-creating-a-local-exception-handler-in-controller",children:"Example: Creating a Local Exception Handler in Controller"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ExceptionHandler(NoSuchElementException.class)\npublic ResponseEntity<String> handleEmployeeNotFound(NoSuchElementException ex) {\n    return new ResponseEntity<>("Employee not found", HttpStatus.NOT_FOUND);\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This method will be triggered only if a ",(0,i.jsx)(n.code,{children:"NoSuchElementException"})," is thrown within that controller."]}),"\n",(0,i.jsxs)(n.li,{children:["It returns:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A user-friendly message: ",(0,i.jsx)(n.code,{children:'"Employee not found"'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Proper HTTP status code: ",(0,i.jsx)(n.code,{children:"404 Not Found"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"modify-the-servicecontroller-code-to-throw-exception",children:"Modify the Service/Controller Code to Throw Exception"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In your controller/service, instead of returning null or ",(0,i.jsx)(n.code,{children:"Optional.empty()"}),", throw an exception:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'return employeeRepository.findById(id)\n        .map(employee -> ResponseEntity.ok(mapToDto(employee)))\n        .orElseThrow(() -> new NoSuchElementException("Employee not found"));\n'})}),"\n",(0,i.jsx)(n.h3,{id:"important-note-response-should-include-proper-status-code",children:"Important Note: Response Should Include Proper Status Code"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Initially, returning just a string resulted in HTTP 200 OK, which is incorrect for errors."}),"\n",(0,i.jsxs)(n.li,{children:["Therefore, instead of returning a ",(0,i.jsx)(n.code,{children:"String"}),", use ",(0,i.jsx)(n.code,{children:"ResponseEntity<String>"})," to set both:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Body (error message)"}),"\n",(0,i.jsxs)(n.li,{children:["HTTP status code (",(0,i.jsx)(n.code,{children:"HttpStatus.NOT_FOUND"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"output-behavior",children:"Output Behavior"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When an invalid employee ID is requested:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The controller throws NoSuchElementException."}),"\n",(0,i.jsx)(n.li,{children:"The exception is caught by the handler method."}),"\n",(0,i.jsx)(n.li,{children:"Response:"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Employee not found",\n  "status": 404\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"limitation-of-local-exception-handler",children:"Limitation of Local Exception Handler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The exception handler defined in the controller class only works within that specific controller."}),"\n",(0,i.jsxs)(n.li,{children:["If you want to handle exceptions globally (across all controllers), use ",(0,i.jsx)(n.code,{children:"@ControllerAdvice"})," instead."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package com.example.springBootWeb.springBootWeb.controllers;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport com.example.springBootWeb.springBootWeb.services.EmployeeService;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.NoSuchElementException;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> getEmployeeById(@PathVariable(name = "employeeId") Long id) {\n        Optional<EmployeeDTO> employeeDTO = employeeService.getEmployeeById(id);\n        return employeeDTO\n                .map(employeeDTO1 -> ResponseEntity.ok(employeeDTO1))\n                .orElseThrow(()->new NoSuchElementException("Employee not found"));\n    }\n\n    @ExceptionHandler(NoSuchElementException.class)\n    public ResponseEntity<String> handleEmployeeNotFound(NoSuchElementException exception){\n        return new ResponseEntity<>("Employee not found", HttpStatus.NOT_FOUND);\n    }\n\n    @GetMapping\n    public ResponseEntity<List<EmployeeDTO>> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                             @RequestParam(required = false) String sortBy) {\n        return ResponseEntity.ok(employeeService.getAllEmployees());\n    }\n\n    @PostMapping\n    public ResponseEntity<EmployeeDTO> createNewEmployee(@RequestBody @Valid EmployeeDTO inputEmployee) {\n        EmployeeDTO savedEmployee = employeeService.createNewEmployee(inputEmployee);\n        return new ResponseEntity<>(savedEmployee, HttpStatus.CREATED);\n    }\n\n\n    @PutMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updateEmployeeById(@RequestBody @Valid EmployeeDTO employeeDTO, @PathVariable Long employeeId) {\n        return ResponseEntity.ok(employeeService.updateEmployeeById(employeeId, employeeDTO));\n    }\n\n    @DeleteMapping(path = "/{employeeId}")\n    public ResponseEntity<Boolean> deleteEmployeeById(@PathVariable Long employeeId) {\n        boolean gotDeleted = employeeService.deleteEmployeeById(employeeId);\n        if (gotDeleted) return ResponseEntity.ok(true);\n        return ResponseEntity.notFound().build();\n    }\n\n    @PatchMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updatePartialEmployeeById(@RequestBody Map<String, Object> updates,\n                                                                 @PathVariable Long employeeId) {\n        EmployeeDTO employeeDTO = employeeService.updatePartialEmployeeById(employeeId, updates);\n        if (employeeDTO == null) return ResponseEntity.notFound().build();\n        return ResponseEntity.ok(employeeDTO);\n    }\n\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"global-exception-handling-in-spring-boot-using-restcontrolleradvice",children:"Global Exception Handling in Spring Boot Using @RestControllerAdvice"}),"\n",(0,i.jsx)(n.h3,{id:"why-global-exception-handling",children:"Why Global Exception Handling?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Writing uniform exception-handling logic across all controllers ensures:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Consistency in error responses"}),"\n",(0,i.jsx)(n.li,{children:"Improved maintainability of code"}),"\n",(0,i.jsx)(n.li,{children:"Easier integration for frontend developers who rely on consistent API error formats"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"limitations-of-local-exceptionhandler",children:"Limitations of Local @ExceptionHandler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Local ",(0,i.jsx)(n.code,{children:"@ExceptionHandler"})," methods work only within the controller class they are defined in."]}),"\n",(0,i.jsxs)(n.li,{children:["If you have multiple controllers (e.g., ",(0,i.jsx)(n.code,{children:"EmployeeController"}),", ",(0,i.jsx)(n.code,{children:"DepartmentController"}),"), you would need to duplicate the same handler in each controller \u2014 which is not optimal."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-global-exception-handler",children:"Creating a Global Exception Handler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a new package, e.g., ",(0,i.jsx)(n.code,{children:"exception"}),", and define a global handler class inside it."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(NoSuchElementException.class)\n    public ResponseEntity<String> handleResourceNotFound(NoSuchElementException ex) {\n        return new ResponseEntity<>("Resource not found", HttpStatus.NOT_FOUND);\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@RestControllerAdvice"})," makes this class applicable to all controllers in your application."]}),"\n",(0,i.jsxs)(n.li,{children:["Now, any ",(0,i.jsx)(n.code,{children:"NoSuchElementException"})," thrown anywhere in any controller will be handled by this method."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"moving-existing-handler-to-global-handler",children:"Moving Existing Handler to Global Handler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Previously, the handler was defined inside ",(0,i.jsx)(n.code,{children:"EmployeeController"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Now, move it into the ",(0,i.jsx)(n.code,{children:"GlobalExceptionHandler"})," class for centralized exception handling."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"updating-method-name-and-message",children:"Updating Method Name and Message"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Since this is now a global handler, rename the method and message accordingly:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ExceptionHandler(NoSuchElementException.class)\npublic ResponseEntity<String> handleResourceNotFound(NoSuchElementException ex) {\n    return new ResponseEntity<>("Resource not found", HttpStatus.NOT_FOUND);\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This ensures the message is generic and applicable to all resources (not just employees)."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"verifying-the-handler",children:"Verifying the Handler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When testing the application:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If a non-existent resource is accessed (e.g., an employee ID that doesn\u2019t exist), the global handler will be invoked."}),"\n",(0,i.jsxs)(n.li,{children:["The response will be:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Message: ",(0,i.jsx)(n.code,{children:"Resource not found"})]}),"\n",(0,i.jsxs)(n.li,{children:["Status code: ",(0,i.jsx)(n.code,{children:"404 Not Found"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'\u251c\u2500\u2500 SpringBootWebApplication.java\n\u251c\u2500\u2500 advices\n\u2502\xa0\xa0 \u2514\u2500\u2500 GlobalExceptionHandler.java\n\u251c\u2500\u2500 annotations\n\u2502\xa0\xa0 \u251c\u2500\u2500 EmployeeRoleValidation.java\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeRoleValidator.java\n\u251c\u2500\u2500 configs\n\u2502\xa0\xa0 \u2514\u2500\u2500 MapperConfig.java\n\u251c\u2500\u2500 controllers\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeController.java\n\u251c\u2500\u2500 dto\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeDTO.java\n\u251c\u2500\u2500 entities\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeEntity.java\n\u251c\u2500\u2500 repositories\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeRepository.java\n\u251c\u2500\u2500 services\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeService.java\n\u2514\u2500\u2500 utils\n\npackage com.example.springBootWeb.springBootWeb.advices;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.util.NoSuchElementException;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(NoSuchElementException.class)\n    public ResponseEntity<String> handleResourceNotFound(NoSuchElementException exception){\n        return new ResponseEntity<>("Resource not found", HttpStatus.NOT_FOUND);\n    }\n}\n\npackage com.example.springBootWeb.springBootWeb.controllers;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport com.example.springBootWeb.springBootWeb.services.EmployeeService;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.NoSuchElementException;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> getEmployeeById(@PathVariable(name = "employeeId") Long id) {\n        Optional<EmployeeDTO> employeeDTO = employeeService.getEmployeeById(id);\n        return employeeDTO\n                .map(employeeDTO1 -> ResponseEntity.ok(employeeDTO1))\n                .orElseThrow(()->new NoSuchElementException("Employee not found"));\n    }\n\n\n\n    @GetMapping\n    public ResponseEntity<List<EmployeeDTO>> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                             @RequestParam(required = false) String sortBy) {\n        return ResponseEntity.ok(employeeService.getAllEmployees());\n    }\n\n    @PostMapping\n    public ResponseEntity<EmployeeDTO> createNewEmployee(@RequestBody @Valid EmployeeDTO inputEmployee) {\n        EmployeeDTO savedEmployee = employeeService.createNewEmployee(inputEmployee);\n        return new ResponseEntity<>(savedEmployee, HttpStatus.CREATED);\n    }\n\n\n    @PutMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updateEmployeeById(@RequestBody @Valid EmployeeDTO employeeDTO, @PathVariable Long employeeId) {\n        return ResponseEntity.ok(employeeService.updateEmployeeById(employeeId, employeeDTO));\n    }\n\n    @DeleteMapping(path = "/{employeeId}")\n    public ResponseEntity<Boolean> deleteEmployeeById(@PathVariable Long employeeId) {\n        boolean gotDeleted = employeeService.deleteEmployeeById(employeeId);\n        if (gotDeleted) return ResponseEntity.ok(true);\n        return ResponseEntity.notFound().build();\n    }\n\n    @PatchMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updatePartialEmployeeById(@RequestBody Map<String, Object> updates,\n                                                                 @PathVariable Long employeeId) {\n        EmployeeDTO employeeDTO = employeeService.updatePartialEmployeeById(employeeId, updates);\n        if (employeeDTO == null) return ResponseEntity.notFound().build();\n        return ResponseEntity.ok(employeeDTO);\n    }\n\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"enhancing-global-exception-handling-with-custom-apierror-object",children:"Enhancing Global Exception Handling with Custom ApiError Object"}),"\n",(0,i.jsx)(n.h3,{id:"why-return-a-custom-error-object",children:"Why Return a Custom Error Object?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Returning just a string message is not sufficient for modern APIs."}),"\n",(0,i.jsxs)(n.li,{children:["A structured error response (like ",(0,i.jsx)(n.code,{children:"ApiError"}),") improves:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Debuggability"}),"\n",(0,i.jsx)(n.li,{children:"Consistency"}),"\n",(0,i.jsx)(n.li,{children:"User experience for frontend developers"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"create-a-custom-error-class-apierror",children:"Create a Custom Error Class ApiError"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Define a new class named ",(0,i.jsx)(n.code,{children:"ApiError"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Include essential error details:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Data\n@Builder\npublic class ApiError {\n    private HttpStatus status;\n    private String message;\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@Data"})," for automatic generation of getters and setters."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@Builder"})," to use the builder pattern for clean object construction."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"update-the-global-exception-handler-to-use-apierror",children:"Update the Global Exception Handler to Use ApiError"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Instead of returning ",(0,i.jsx)(n.code,{children:"ResponseEntity<String>"}),", return ",(0,i.jsx)(n.code,{children:"ResponseEntity<ApiError>"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ExceptionHandler(NoSuchElementException.class)\npublic ResponseEntity<ApiError> handleResourceNotFound(NoSuchElementException ex) {\n    ApiError error = ApiError.builder()\n        .status(HttpStatus.NOT_FOUND)\n        .message("Resource not found")\n        .build();\n\n    return new ResponseEntity<>(error, HttpStatus.NOT_FOUND);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"benefits-of-this-approach",children:"Benefits of This Approach"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The API response now contains:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A standardized structure"}),"\n",(0,i.jsxs)(n.li,{children:["HTTP status code (",(0,i.jsx)(n.code,{children:"404 Not Found"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Clear error message (",(0,i.jsx)(n.code,{children:"Resource not found"}),")"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Easier for frontend teams to display or log meaningful errors."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"code",children:"code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'\u251c\u2500\u2500 SpringBootWebApplication.java\n\u251c\u2500\u2500 advices\n\u2502\xa0\xa0 \u251c\u2500\u2500 ApiError.java\n\u2502\xa0\xa0 \u2514\u2500\u2500 GlobalExceptionHandler.java\n\u251c\u2500\u2500 annotations\n\u2502\xa0\xa0 \u251c\u2500\u2500 EmployeeRoleValidation.java\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeRoleValidator.java\n\u251c\u2500\u2500 configs\n\u2502\xa0\xa0 \u2514\u2500\u2500 MapperConfig.java\n\u251c\u2500\u2500 controllers\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeController.java\n\u251c\u2500\u2500 dto\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeDTO.java\n\u251c\u2500\u2500 entities\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeEntity.java\n\u251c\u2500\u2500 repositories\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeRepository.java\n\u251c\u2500\u2500 services\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeService.java\n\u2514\u2500\u2500 utils\n\n\npackage com.example.springBootWeb.springBootWeb.advices;\n\nimport lombok.Builder;\nimport lombok.Data;\nimport org.springframework.http.HttpStatus;\n\n@Data\n@Builder\npublic class ApiError {\n    private HttpStatus status;\n    private String message;\n}\n\n\npackage com.example.springBootWeb.springBootWeb.advices;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.util.NoSuchElementException;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(NoSuchElementException.class)\n    public ResponseEntity<ApiError> handleResourceNotFound(NoSuchElementException exception){\n        ApiError apiError = ApiError.builder().status(HttpStatus.NOT_FOUND).message("Resource not found").build();\n        return new ResponseEntity<>(apiError, HttpStatus.NOT_FOUND);\n    }\n}\n\npackage com.example.springBootWeb.springBootWeb.controllers;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport com.example.springBootWeb.springBootWeb.services.EmployeeService;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.NoSuchElementException;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> getEmployeeById(@PathVariable(name = "employeeId") Long id) {\n        Optional<EmployeeDTO> employeeDTO = employeeService.getEmployeeById(id);\n        return employeeDTO\n                .map(employeeDTO1 -> ResponseEntity.ok(employeeDTO1))\n                .orElseThrow(()->new NoSuchElementException("Employee not found"));\n    }\n\n\n\n    @GetMapping\n    public ResponseEntity<List<EmployeeDTO>> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                             @RequestParam(required = false) String sortBy) {\n        return ResponseEntity.ok(employeeService.getAllEmployees());\n    }\n\n    @PostMapping\n    public ResponseEntity<EmployeeDTO> createNewEmployee(@RequestBody @Valid EmployeeDTO inputEmployee) {\n        EmployeeDTO savedEmployee = employeeService.createNewEmployee(inputEmployee);\n        return new ResponseEntity<>(savedEmployee, HttpStatus.CREATED);\n    }\n\n\n    @PutMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updateEmployeeById(@RequestBody @Valid EmployeeDTO employeeDTO, @PathVariable Long employeeId) {\n        return ResponseEntity.ok(employeeService.updateEmployeeById(employeeId, employeeDTO));\n    }\n\n    @DeleteMapping(path = "/{employeeId}")\n    public ResponseEntity<Boolean> deleteEmployeeById(@PathVariable Long employeeId) {\n        boolean gotDeleted = employeeService.deleteEmployeeById(employeeId);\n        if (gotDeleted) return ResponseEntity.ok(true);\n        return ResponseEntity.notFound().build();\n    }\n\n    @PatchMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updatePartialEmployeeById(@RequestBody Map<String, Object> updates,\n                                                                 @PathVariable Long employeeId) {\n        EmployeeDTO employeeDTO = employeeService.updatePartialEmployeeById(employeeId, updates);\n        if (employeeDTO == null) return ResponseEntity.notFound().build();\n        return ResponseEntity.ok(employeeDTO);\n    }\n\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"creating-and-using-custom-exceptions-in-spring-boot",children:"Creating and Using Custom Exceptions in Spring Boot"}),"\n",(0,i.jsx)(n.h3,{id:"why-create-a-custom-exception",children:"Why Create a Custom Exception?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Using generic exceptions like ",(0,i.jsx)(n.code,{children:"NoSuchElementException"})," is not ideal."]}),"\n",(0,i.jsx)(n.li,{children:"Custom exceptions improve clarity and are more meaningful for both developers and clients."}),"\n",(0,i.jsx)(n.li,{children:"They enable precise exception handling at a global level."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"define-a-custom-exception-resourcenotfoundexception",children:["Define a Custom Exception: ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a new package called ",(0,i.jsx)(n.code,{children:"exception"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Inside it, create a class ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class ResourceNotFoundException extends RuntimeException {\n    public ResourceNotFoundException(String message) {\n        super(message);\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This custom exception:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Extends ",(0,i.jsx)(n.code,{children:"RuntimeException"})]}),"\n",(0,i.jsx)(n.li,{children:"Accepts a custom message"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"use-resourcenotfoundexception-in-the-controller",children:"Use ResourceNotFoundException in the Controller"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Replace ",(0,i.jsx)(n.code,{children:"NoSuchElementException"})," with ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"})," in your controller."]}),"\n",(0,i.jsx)(n.li,{children:"Example usage:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'throw new ResourceNotFoundException("Employee not found with ID " + id);\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This makes the error message dynamic and more informative by including the employee ID."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"update-the-global-exception-handler",children:"Update the Global Exception Handler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Modify the exception handler method to catch ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"})," instead:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@ExceptionHandler(ResourceNotFoundException.class)\npublic ResponseEntity<ApiError> handleResourceNotFound(ResourceNotFoundException ex) {\n    ApiError error = ApiError.builder()\n        .status(HttpStatus.NOT_FOUND)\n        .message(ex.getMessage())\n        .build();\n\n    return new ResponseEntity<>(error, HttpStatus.NOT_FOUND);\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Dynamically uses the message from the exception object"}),"\n",(0,i.jsxs)(n.li,{children:["Returns a structured ",(0,i.jsx)(n.code,{children:"ApiError"})," response"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"result-of-this-approach",children:"Result of This Approach"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When a requested employee is not found:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"})," is thrown."]}),"\n",(0,i.jsx)(n.li,{children:"The global handler catches it and returns a clean JSON response like:"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "NOT_FOUND",\n  "message": "Employee not found with ID 5"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"code-1",children:"code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package com.example.springBootWeb.springBootWeb.controllers;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.exceptions.ResourceNotFoundException;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport com.example.springBootWeb.springBootWeb.services.EmployeeService;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.NoSuchElementException;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> getEmployeeById(@PathVariable(name = "employeeId") Long id) throws ResourceNotFoundException {\n        Optional<EmployeeDTO> employeeDTO = employeeService.getEmployeeById(id);\n        return employeeDTO\n                .map(employeeDTO1 -> ResponseEntity.ok(employeeDTO1))\n                .orElseThrow(()->new ResourceNotFoundException("Employee not found with id: "+id));\n    }\n\n\n\n    @GetMapping\n    public ResponseEntity<List<EmployeeDTO>> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                             @RequestParam(required = false) String sortBy) {\n        return ResponseEntity.ok(employeeService.getAllEmployees());\n    }\n\n    @PostMapping\n    public ResponseEntity<EmployeeDTO> createNewEmployee(@RequestBody @Valid EmployeeDTO inputEmployee) {\n        EmployeeDTO savedEmployee = employeeService.createNewEmployee(inputEmployee);\n        return new ResponseEntity<>(savedEmployee, HttpStatus.CREATED);\n    }\n\n\n    @PutMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updateEmployeeById(@RequestBody @Valid EmployeeDTO employeeDTO, @PathVariable Long employeeId) {\n        return ResponseEntity.ok(employeeService.updateEmployeeById(employeeId, employeeDTO));\n    }\n\n    @DeleteMapping(path = "/{employeeId}")\n    public ResponseEntity<Boolean> deleteEmployeeById(@PathVariable Long employeeId) {\n        boolean gotDeleted = employeeService.deleteEmployeeById(employeeId);\n        if (gotDeleted) return ResponseEntity.ok(true);\n        return ResponseEntity.notFound().build();\n    }\n\n    @PatchMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updatePartialEmployeeById(@RequestBody Map<String, Object> updates,\n                                                                 @PathVariable Long employeeId) {\n        EmployeeDTO employeeDTO = employeeService.updatePartialEmployeeById(employeeId, updates);\n        if (employeeDTO == null) return ResponseEntity.notFound().build();\n        return ResponseEntity.ok(employeeDTO);\n    }\n\n}\n\n\npackage com.example.springBootWeb.springBootWeb.exceptions;\n\npublic class ResourceNotFoundException extends Exception{\n    public ResourceNotFoundException(String message) {\n        super(message);\n    }\n}\n\n\npackage com.example.springBootWeb.springBootWeb.advices;\n\nimport com.example.springBootWeb.springBootWeb.exceptions.ResourceNotFoundException;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.util.NoSuchElementException;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity<ApiError> handleResourceNotFound(ResourceNotFoundException exception){\n        ApiError apiError = ApiError.builder()\n                .status(HttpStatus.NOT_FOUND)\n                .message(exception.getMessage())\n                .build();\n        return new ResponseEntity<>(apiError, HttpStatus.NOT_FOUND);\n    }\n}\n\n\npackage com.example.springBootWeb.springBootWeb.advices;\n\nimport lombok.Builder;\nimport lombok.Data;\nimport org.springframework.http.HttpStatus;\n\n@Data\n@Builder\npublic class ApiError {\n    private HttpStatus status;\n    private String message;\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"custom-exception-handling-during-update-in-spring-boot",children:"Custom Exception Handling During Update in Spring Boot"}),"\n",(0,i.jsx)(n.h3,{id:"apply-custom-exception-handling-to-update-operation",children:"Apply Custom Exception Handling to Update Operation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The same custom exception logic (",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"}),") used for ",(0,i.jsx)(n.code,{children:"getEmployeeById()"})," can also be used for update operations."]}),"\n",(0,i.jsx)(n.li,{children:"Users might attempt to update an employee with an ID that does not exist in the database."}),"\n",(0,i.jsx)(n.li,{children:"In such cases, we should validate the existence of the employee ID before updating."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"validate-employee-id-before-updating",children:"Validate Employee ID Before Updating"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.code,{children:"updateEmployeeById()"})," method (inside the Service layer), add a check:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'if (!employeeRepository.existsById(employeeId)) {\n    throw new ResourceNotFoundException("Employee not found with ID: " + employeeId);\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If the employee does not exist:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"})," is thrown."]}),"\n",(0,i.jsx)(n.li,{children:"This will be caught by the global exception handler, returning a proper JSON response."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"existing-issue-in-code--currently-dto-is-being-converted-to-an-entity-and-the-id-is-set-even-if-the-employee-does-not-exist",children:"Existing Issue in Code- Currently, DTO is being converted to an entity, and the ID is set even if the employee does not exist."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This may result in unexpected creation or update, which is not ideal."}),"\n",(0,i.jsxs)(n.li,{children:["This decision should be clarified with the Product Manager:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Should a non-existing employee be created?"}),"\n",(0,i.jsx)(n.li,{children:"Or should an exception be thrown?"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"fix-implementation-logic",children:"Fix Implementation Logic"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use the repository method ",(0,i.jsx)(n.code,{children:"existsById(id)"})," before updating."]}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"false"}),", throw the ",(0,i.jsx)(n.code,{children:"ResourceNotFoundException"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["This ensures:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No blind overwrite."}),"\n",(0,i.jsx)(n.li,{children:"Clear error messages for invalid operations."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exception-message-example",children:"Exception Message Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'throw new ResourceNotFoundException("Employee not found with ID: " + employeeId);\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This message is passed to the global exception handler and returned in a structured format."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"validate-dto-input-role-validator-fix",children:"Validate DTO Input: Role Validator Fix"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"An error was encountered due to the null value in the role field."}),"\n",(0,i.jsxs)(n.li,{children:["This was caused by the ",(0,i.jsx)(n.code,{children:"@Valid"})," annotation and an unhandled null case in a custom validator."]}),"\n",(0,i.jsx)(n.li,{children:"Fix:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"if (inputRole == null) {\n    return false;\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This ensures validation does not break for null inputs."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"retesting-the-api",children:"Retesting the API"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When testing PUT /employee/","id",":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If the employee doesn't exist: returns 404 Not Found."}),"\n",(0,i.jsx)(n.li,{children:"If the employee exists: updates successfully."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Example Steps:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Try to update employee with ID 3: received not found error."}),"\n",(0,i.jsx)(n.li,{children:"Created a new employee: received ID 10002."}),"\n",(0,i.jsx)(n.li,{children:"Updated employee with ID 10002: success, no error."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Output message when not found:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "NOT_FOUND",\n  "message": "Employee not found with ID: 3"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"final-code",children:"final code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package com.codingshuttle.springbootwebtutorial.springbootwebtutorial.advices;Add commentMore actions\n\nimport lombok.Builder;\nimport lombok.Data;\nimport org.springframework.http.HttpStatus;\n\nimport java.util.List;\n\n@Data\n@Builder\npublic class ApiError {\n\n    private HttpStatus status;\n    private String message;\n    private List<String> subErrors;\n\n}\n\npackage com.codingshuttle.springbootwebtutorial.springbootwebtutorial.advices;Add commentMore actions\n\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.exceptions.ResourceNotFoundException;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.util.List;\nimport java.util.NoSuchElementException;\nimport java.util.stream.Collectors;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity<ApiError> handleResourceNotFound(ResourceNotFoundException exception) {\n        ApiError apiError = ApiError.builder()\n                .status(HttpStatus.NOT_FOUND)\n                .message(exception.getMessage())\n                .build();\n        return new ResponseEntity<>(apiError, HttpStatus.NOT_FOUND);\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity<ApiError> handleInternalServerError(Exception exception) {\n        ApiError apiError = ApiError.builder()\n                .status(HttpStatus.INTERNAL_SERVER_ERROR)\n                .message(exception.getMessage())\n                .build();\n        return new ResponseEntity<>(apiError, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity<ApiError> handleInputValidationErrors(MethodArgumentNotValidException exception) {\n        List<String> errors = exception\n                .getBindingResult()\n                .getAllErrors()\n                .stream()\n                .map(error -> error.getDefaultMessage())\n                .collect(Collectors.toList());\n\n        ApiError apiError = ApiError.builder()\n                .status(HttpStatus.BAD_REQUEST)\n                .message("Input validation failed")\n                .subErrors(errors)\n                .build();\n        return new ResponseEntity<>(apiError, HttpStatus.BAD_REQUEST);\n    }\n\n\n}\n\n\npackage com.codingshuttle.springbootwebtutorial.springbootwebtutorial.controllers;\n\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.dto.EmployeeDTO;\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.exceptions.ResourceNotFoundException;\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.services.EmployeeService;\nimport jakarta.validation.Valid;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.NoSuchElementException;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> getEmployeeById(@PathVariable(name = "employeeId") Long id) {\n        Optional<EmployeeDTO> employeeDTO = employeeService.getEmployeeById(id);\n        return employeeDTO\n                .map(employeeDTO1 -> ResponseEntity.ok(employeeDTO1))\n                .orElseThrow(() -> new ResourceNotFoundException("Employee not found with id: "+id));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<EmployeeDTO>> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                @RequestParam(required = false) String sortBy) {\n        return ResponseEntity.ok(employeeService.getAllEmployees());\n    }\n\n    @PostMapping\n    public ResponseEntity<EmployeeDTO> createNewEmployee(@RequestBody @Valid EmployeeDTO inputEmployee) {\n        EmployeeDTO savedEmployee = employeeService.createNewEmployee(inputEmployee);\n        return new ResponseEntity<>(savedEmployee, HttpStatus.CREATED);\n    }\n\n\n    @PutMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updateEmployeeById(@RequestBody @Valid EmployeeDTO employeeDTO, @PathVariable Long employeeId) {\n        return ResponseEntity.ok(employeeService.updateEmployeeById(employeeId, employeeDTO));\n    }\n\n    @DeleteMapping(path = "/{employeeId}")\n    public ResponseEntity<Boolean> deleteEmployeeById(@PathVariable Long employeeId) {\n        boolean gotDeleted = employeeService.deleteEmployeeById(employeeId);\n        if (gotDeleted) return ResponseEntity.ok(true);\n        return ResponseEntity.notFound().build();\n    }\n\n    @PatchMapping(path = "/{employeeId}")\n    public ResponseEntity<EmployeeDTO> updatePartialEmployeeById(@RequestBody Map<String, Object> updates,\n                                                 @PathVariable Long employeeId) {\n        EmployeeDTO employeeDTO = employeeService.updatePartialEmployeeById(employeeId, updates);\n        if (employeeDTO == null) return ResponseEntity.notFound().build();\n        return ResponseEntity.ok(employeeDTO);\n    }\n\n}\n\npackage com.codingshuttle.springbootwebtutorial.springbootwebtutorial.services;\n\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.dto.EmployeeDTO;\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.entities.EmployeeEntity;\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.exceptions.ResourceNotFoundException;\nimport com.codingshuttle.springbootwebtutorial.springbootwebtutorial.repositories.EmployeeRepository;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.data.util.ReflectionUtils;\nimport org.springframework.stereotype.Service;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Optional;\nimport java.util.stream.Collectors;\n\n@Service\npublic class EmployeeService {\n\n    private final EmployeeRepository employeeRepository;\n    private final ModelMapper modelMapper;\n\n    public EmployeeService(EmployeeRepository employeeRepository, ModelMapper modelMapper) {\n        this.employeeRepository = employeeRepository;\n        this.modelMapper = modelMapper;\n    }\n\n\n    public Optional<EmployeeDTO> getEmployeeById(Long id) {\n//        Optional<EmployeeEntity> employeeEntity = employeeRepository.findById(id);\n//        return employeeEntity.map(employeeEntity1 -> modelMapper.map(employeeEntity1, EmployeeDTO.class));\n\n        return employeeRepository.findById(id).map(employeeEntity -> modelMapper.map(employeeEntity, EmployeeDTO.class));\n    }\n\n    public List<EmployeeDTO> getAllEmployees() {\n        List<EmployeeEntity> employeeEntities = employeeRepository.findAll();\n        return employeeEntities\n                .stream()\n                .map(employeeEntity -> modelMapper.map(employeeEntity, EmployeeDTO.class))\n                .collect(Collectors.toList());\n    }\n\n    public EmployeeDTO createNewEmployee(EmployeeDTO inputEmployee) {\n//        to check if user is admin\n//        log something\n        EmployeeEntity toSaveEntity = modelMapper.map(inputEmployee, EmployeeEntity.class);\n        EmployeeEntity savedEmployeeEntity = employeeRepository.save(toSaveEntity);\n        return modelMapper.map(savedEmployeeEntity, EmployeeDTO.class);\n    }\n\n    public EmployeeDTO updateEmployeeById(Long employeeId, EmployeeDTO employeeDTO) {\n        isExistsByEmployeeId(employeeId);\n        EmployeeEntity employeeEntity = modelMapper.map(employeeDTO, EmployeeEntity.class);\n        employeeEntity.setId(employeeId);\n        EmployeeEntity savedEmployeeEntity = employeeRepository.save(employeeEntity);\n        return modelMapper.map(savedEmployeeEntity, EmployeeDTO.class);\n    }\n\n    public void isExistsByEmployeeId(Long employeeId) {\n        boolean exists = employeeRepository.existsById(employeeId);\n        if(!exists) throw new ResourceNotFoundException("Employee not found with id: "+employeeId);\n    }\n\n    public boolean deleteEmployeeById(Long employeeId) {\n        isExistsByEmployeeId(employeeId);\n        employeeRepository.deleteById(employeeId);\n        return true;\n    }\n\n    public EmployeeDTO updatePartialEmployeeById(Long employeeId, Map<String, Object> updates) {\n        isExistsByEmployeeId(employeeId);\n        EmployeeEntity employeeEntity = employeeRepository.findById(employeeId).get();\n        updates.forEach((field, value) -> {\n            Field fieldToBeUpdated = ReflectionUtils.findRequiredField(EmployeeEntity.class, field);\n            fieldToBeUpdated.setAccessible(true);\n            ReflectionUtils.setField(fieldToBeUpdated, employeeEntity, value);\n        });\n        return modelMapper.map(employeeRepository.save(employeeEntity), EmployeeDTO.class);\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/ritiksharma142001/demo-test/tree/b342b3c930973e9f481d3180a1de925d09dcde6f/src/main/java/com/codingshuttle/springbootwebtutorial/springbootwebtutorial",children:"Code"})}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);