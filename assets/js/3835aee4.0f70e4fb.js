"use strict";(globalThis.webpackChunkes_note=globalThis.webpackChunkes_note||[]).push([[7011],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>l});var t=i(96540);const a={},r=t.createContext(a);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},74933(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"advanced-java/0-1/Week-3/3.6","title":"Mapping-2","description":"Mapping Types between Two Entities","source":"@site/docs/advanced-java/0-1/Week-3/3.6.md","sourceDirName":"advanced-java/0-1/Week-3","slug":"/advanced-java/0-1/Week-3/3.6","permalink":"/one-notes/advanced-java/0-1/Week-3/3.6","draft":false,"unlisted":false,"editUrl":"https://github.com/ritiksharma142001/one-notes/edit/main/docs/advanced-java/0-1/Week-3/3.6.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Mapping-1","permalink":"/one-notes/advanced-java/0-1/Week-3/3.5"},"next":{"title":"Final","permalink":"/one-notes/advanced-java/0-1/Week-3/3.7"}}');var a=i(74848),r=i(28453);const s={sidebar_position:6},l="Mapping-2",d={},o=[{value:"Mapping Types between Two Entities",id:"mapping-types-between-two-entities",level:2},{value:"Real-World Scenario",id:"real-world-scenario",level:3},{value:"Database Consideration",id:"database-consideration",level:3},{value:"Using Spring Data JPA",id:"using-spring-data-jpa",level:3},{value:"Implementation Steps",id:"implementation-steps",level:3},{value:"Database Output After Mapping",id:"database-output-after-mapping",level:3},{value:"Problem Summary",id:"problem-summary",level:2},{value:"What was wrong?",id:"what-was-wrong",level:3},{value:"1. <strong>Lombok&#39;s <code>@Data</code> annotation</strong>",id:"1-lomboks-data-annotation",level:4},{value:"What was done to fix it?",id:"what-was-done-to-fix-it",level:3},{value:"1. <strong>Removed Lombok\u2019s <code>@Data</code></strong>",id:"1-removed-lomboks-data",level:4},{value:"2. <strong>Wrote custom <code>equals()</code> and <code>hashCode()</code></strong>",id:"2-wrote-custom-equals-and-hashcode",level:4},{value:"3. <strong>Added <code>@JsonIgnore</code></strong>",id:"3-added-jsonignore",level:4},{value:"Testing the Fix",id:"testing-the-fix",level:3},{value:"<code>CascadeType.ALL</code>",id:"cascadetypeall",level:3},{value:"First, what is <code>@Data</code> in Lombok?",id:"first-what-is-data-in-lombok",level:3},{value:"What is bidirectional mapping?",id:"what-is-bidirectional-mapping",level:3},{value:"What problem does <code>@Data</code> cause?",id:"what-problem-does-data-cause",level:3},{value:"Understanding <code>CascadeType</code>",id:"understanding-cascadetype",level:3},{value:"Understanding <code>FetchType</code>",id:"understanding-fetchtype",level:3},{value:"Note About Jackson and Lazy Fetching",id:"note-about-jackson-and-lazy-fetching",level:3},{value:"Many-to-Many Mapping Preview (Freelancers)",id:"many-to-many-mapping-preview-freelancers",level:3},{value:"Strategy for Many-to-Many Mapping",id:"strategy-for-many-to-many-mapping",level:3},{value:"Many-to-Many Mapping: Freelancers and Departments",id:"many-to-many-mapping-freelancers-and-departments",level:3},{value:"\ud83e\udde9 Step 1: Define Many-to-Many Mapping in <code>Employee</code> Entity",id:"-step-1-define-many-to-many-mapping-in-employee-entity",level:4},{value:"\ud83d\udee0\ufe0f Step 2: Configure <code>@JoinTable</code>",id:"\ufe0f-step-2-configure-jointable",level:4},{value:"\ud83e\udde9 Step 3: Make Mapping Bi-Directional (Optional)",id:"-step-3-make-mapping-bi-directional-optional",level:4},{value:"\ud83d\ude80 Step 4: Creating and Linking Data",id:"-step-4-creating-and-linking-data",level:4},{value:"\ud83d\udee0\ufe0f Step 5: Fixing the Save Strategy",id:"\ufe0f-step-5-fixing-the-save-strategy",level:4},{value:"\ud83d\udd01 Step 6: Preventing Infinite Recursion",id:"-step-6-preventing-infinite-recursion",level:4},{value:"Many-to-Many Mapping and Advanced JPA Use Cases",id:"many-to-many-mapping-and-advanced-jpa-use-cases",level:3},{value:"\ud83e\udde9 Adding Freelancers to Departments",id:"-adding-freelancers-to-departments",level:4},{value:"Verifying Data",id:"verifying-data",level:4},{value:"Optional: Join Table in One-to-Many Mapping",id:"optional-join-table-in-one-to-many-mapping",level:3},{value:"\ud83d\udd27 Implementation:",id:"-implementation",level:4},{value:"code",id:"code",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"mapping-2",children:"Mapping-2"})}),"\n",(0,a.jsx)(n.h2,{id:"mapping-types-between-two-entities",children:"Mapping Types between Two Entities"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["We have already seen a One-to-One mapping between ",(0,a.jsx)(n.code,{children:"Department"})," and ",(0,a.jsx)(n.code,{children:"Employee"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"Now, we\u2019ll demonstrate Many-to-One mapping between the same entities."}),"\n",(0,a.jsxs)(n.li,{children:["No need to create new entities \u2014 we'll reuse ",(0,a.jsx)(n.code,{children:"Department"})," and ",(0,a.jsx)(n.code,{children:"Employee"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"real-world-scenario",children:"Real-World Scenario"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["A Department:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Has one manager (One-to-One with ",(0,a.jsx)(n.code,{children:"Employee"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:["Has many workers (One-to-Many with ",(0,a.jsx)(n.code,{children:"Employee"}),")"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["An Employee:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Works in only one department (Many-to-One)"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["So:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"From Department \u2192 Employee: One-to-Many"}),"\n",(0,a.jsx)(n.li,{children:"From Employee \u2192 Department: Many-to-One"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"database-consideration",children:"Database Consideration"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["In SQL:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"A Department table cannot store a list of employees."}),"\n",(0,a.jsxs)(n.li,{children:["But an Employee table can store a foreign key (",(0,a.jsx)(n.code,{children:"department_id"}),")."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Therefore:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The foreign key should be placed in the ",(0,a.jsx)(n.code,{children:"Employee"})," entity/table."]}),"\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.code,{children:"Department"})," table won\u2019t know who its workers are directly."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"using-spring-data-jpa",children:"Using Spring Data JPA"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["With Spring Data JPA and Hibernate:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"We can still get a list of employees in a department easily."}),"\n",(0,a.jsxs)(n.li,{children:["Even if the ",(0,a.jsx)(n.code,{children:"Department"})," entity does not store them directly."]}),"\n",(0,a.jsx)(n.li,{children:"Hibernate handles the retrieval of related records efficiently."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"implementation-steps",children:"Implementation Steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["In ",(0,a.jsx)(n.code,{children:"Employee"})," entity:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Add a field to store the department it works in, e.g., ",(0,a.jsx)(n.code,{children:"workerDepartment"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Annotate it as a ",(0,a.jsx)(n.code,{children:"@ManyToOne"})," relationship."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Explanation:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"@JoinColumn"})," defines the foreign key column:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["name: column name in the ",(0,a.jsx)(n.code,{children:"Employee"})," table (e.g., ",(0,a.jsx)(n.code,{children:"worker_department_id"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"referencedColumnName"}),": which column in ",(0,a.jsx)(n.code,{children:"Department"})," it maps to (typically ",(0,a.jsx)(n.code,{children:"id"}),")"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["You can omit ",(0,a.jsx)(n.code,{children:"referencedColumnName"})," if it's the default (",(0,a.jsx)(n.code,{children:"id"}),"), but specifying it is safer when names differ."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"database-output-after-mapping",children:"Database Output After Mapping"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["After applying the mapping and running the app:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Employee"})," table now contains:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"id"})," (Primary key)"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"name"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"worker_department_id"})," (Foreign key to ",(0,a.jsx)(n.code,{children:"Department"}),")"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["A foreign key constraint is added from ",(0,a.jsx)(n.code,{children:"worker_department_id"})," to ",(0,a.jsx)(n.code,{children:"Department.id"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"problem-summary",children:"Problem Summary"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"You have two entities"}),": ",(0,a.jsx)(n.code,{children:"Department"})," and ",(0,a.jsx)(n.code,{children:"Employee"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["An employee belongs to a department, and a department can have many employees \u2192 this is called a ",(0,a.jsx)(n.strong,{children:"bidirectional one-to-many and many-to-one mapping"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["But initially, ",(0,a.jsx)(n.strong,{children:"data was not syncing correctly"})," between both sides of the relationship. One side worked (e.g., Employee \u2192 Department), but the other (Department \u2192 List of Employees) did ",(0,a.jsx)(n.strong,{children:"not"})," work properly."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"what-was-wrong",children:"What was wrong?"}),"\n",(0,a.jsxs)(n.h4,{id:"1-lomboks-data-annotation",children:["1. ",(0,a.jsxs)(n.strong,{children:["Lombok's ",(0,a.jsx)(n.code,{children:"@Data"})," annotation"]})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"@Data"})," automatically generates ",(0,a.jsx)(n.code,{children:"hashCode()"})," and ",(0,a.jsx)(n.code,{children:"equals()"})," using ",(0,a.jsx)(n.strong,{children:"all fields"}),", including the ",(0,a.jsx)(n.strong,{children:"entity references"})," (like ",(0,a.jsx)(n.code,{children:"Department"})," having ",(0,a.jsx)(n.code,{children:"List<Employee>"})," and ",(0,a.jsx)(n.code,{children:"Employee"})," having ",(0,a.jsx)(n.code,{children:"Department"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["This caused:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Infinite recursion"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"StackOverflowError"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Unexpected behavior in bidirectional mapping"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"what-was-done-to-fix-it",children:"What was done to fix it?"}),"\n",(0,a.jsxs)(n.h4,{id:"1-removed-lomboks-data",children:["1. ",(0,a.jsxs)(n.strong,{children:["Removed Lombok\u2019s ",(0,a.jsx)(n.code,{children:"@Data"})]})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Instead, only used:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"@Getter"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"@Setter"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Manually implemented ",(0,a.jsx)(n.code,{children:"equals()"})," and ",(0,a.jsx)(n.code,{children:"hashCode()"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.h4,{id:"2-wrote-custom-equals-and-hashcode",children:["2. ",(0,a.jsxs)(n.strong,{children:["Wrote custom ",(0,a.jsx)(n.code,{children:"equals()"})," and ",(0,a.jsx)(n.code,{children:"hashCode()"})]})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Only used ",(0,a.jsx)(n.strong,{children:"non-entity fields"}),", like:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"id"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"name"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Excluded"})," fields like ",(0,a.jsx)(n.code,{children:"List<Employee>"})," or ",(0,a.jsx)(n.code,{children:"Department"}),", to avoid recursion or performance issues."]}),"\n"]}),"\n",(0,a.jsxs)(n.h4,{id:"3-added-jsonignore",children:["3. ",(0,a.jsxs)(n.strong,{children:["Added ",(0,a.jsx)(n.code,{children:"@JsonIgnore"})]})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["In REST APIs, when Spring Boot serializes objects to JSON, bidirectional references can ",(0,a.jsx)(n.strong,{children:"cause infinite loops"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["So, he added ",(0,a.jsx)(n.code,{children:"@JsonIgnore"})," on one side:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Either on ",(0,a.jsx)(n.code,{children:"Employee.department"})," or ",(0,a.jsx)(n.code,{children:"Department.employees"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["He chose to ignore it on ",(0,a.jsx)(n.code,{children:"Employee.department"}),", so:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Department"})," will show the list of employees."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Employee"})," won\u2019t directly show the department in JSON (can be fetched using a separate API call)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"testing-the-fix",children:"Testing the Fix"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Created a new Department and Employees."}),"\n",(0,a.jsx)(n.li,{children:"Assigned Employees to the Department."}),"\n",(0,a.jsxs)(n.li,{children:["Fetched:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Department \u2192 Got list of employees \u2705"}),"\n",(0,a.jsxs)(n.li,{children:["Employee \u2192 Department is hidden (because of ",(0,a.jsx)(n.code,{children:"@JsonIgnore"}),") \u2705"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"No recursion, no crash, working as expected."})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"cascadetypeall",children:(0,a.jsx)(n.code,{children:"CascadeType.ALL"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["He mentioned using ",(0,a.jsx)(n.code,{children:"cascade = CascadeType.ALL"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["This means when you ",(0,a.jsx)(n.strong,{children:"save or delete a Department"}),", it ",(0,a.jsx)(n.strong,{children:"automatically saves or deletes all its employees"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"first-what-is-data-in-lombok",children:["First, what is ",(0,a.jsx)(n.code,{children:"@Data"})," in Lombok?"]}),"\n",(0,a.jsx)(n.p,{children:"When you write:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"@Data\npublic class Employee {\n    private Long id;\n    private String name;\n    private Department department;\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Lombok automatically adds:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Getters & Setters"}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"toString()"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"equals()"})," and ",(0,a.jsx)(n.code,{children:"hashCode()"}),"\n\u26a0\ufe0f ",(0,a.jsx)(n.strong,{children:"Important"}),": It includes ",(0,a.jsx)(n.strong,{children:"all fields"}),", including ",(0,a.jsx)(n.code,{children:"department"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"what-is-bidirectional-mapping",children:"What is bidirectional mapping?"}),"\n",(0,a.jsx)(n.p,{children:"Example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"class Department {\n    List<Employee> employees; // one department has many employees\n}\n\nclass Employee {\n    Department department; // each employee belongs to one department\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"So:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Department \u2192 List<Employee>"})," (One-to-Many)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Employee \u2192 Department"})," (Many-to-One)\nThis is called ",(0,a.jsx)(n.strong,{children:"bidirectional mapping"}),' \u2014 both sides "point" to each other.']}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"what-problem-does-data-cause",children:["What problem does ",(0,a.jsx)(n.code,{children:"@Data"})," cause?"]}),"\n",(0,a.jsx)(n.p,{children:"Let\u2019s say:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Employee e"})," has a ",(0,a.jsx)(n.code,{children:"Department d"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Department d"})," has a list with ",(0,a.jsx)(n.code,{children:"Employee e"})," in it\nNow, if Lombok includes ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"department"})})," in ",(0,a.jsx)(n.code,{children:"equals()"})," and ",(0,a.jsx)(n.code,{children:"hashCode()"})," of ",(0,a.jsx)(n.code,{children:"Employee"}),", and ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"employees"})})," in the same methods of ",(0,a.jsx)(n.code,{children:"Department"}),", we get a ",(0,a.jsx)(n.strong,{children:"loop"}),":"]}),"\n",(0,a.jsxs)(n.li,{children:["To compare two ",(0,a.jsx)(n.code,{children:"Employee"}),", it compares their ",(0,a.jsx)(n.code,{children:"Department"})]}),"\n",(0,a.jsxs)(n.li,{children:["To compare two ",(0,a.jsx)(n.code,{children:"Department"}),", it compares the list of ",(0,a.jsx)(n.code,{children:"Employee"})]}),"\n",(0,a.jsxs)(n.li,{children:["Again, each ",(0,a.jsx)(n.code,{children:"Employee"})," has ",(0,a.jsx)(n.code,{children:"Department"}),"... and so on"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\ud83d\udd01 ",(0,a.jsx)(n.strong,{children:"This never ends"}),", causing:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Infinite recursion"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"StackOverflowError"})}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.h3,{id:"understanding-cascadetype",children:["Understanding ",(0,a.jsx)(n.code,{children:"CascadeType"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.code,{children:"cascade"})," attribute in JPA helps ",(0,a.jsx)(n.strong,{children:"propagate operations"})," (save, delete, etc.) from one entity to its related entities."]}),"\n",(0,a.jsxs)(n.li,{children:["For example:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["If you save an ",(0,a.jsx)(n.code,{children:"Employee"}),", the associated ",(0,a.jsx)(n.code,{children:"Department"})," is also saved ",(0,a.jsx)(n.strong,{children:"if cascade is enabled"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["If you delete an ",(0,a.jsx)(n.code,{children:"Employee"}),", the reference can also be removed from the ",(0,a.jsx)(n.code,{children:"Department"}),", based on the cascade strategy."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Common Cascade Types:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PERSIST"}),": Propagates only save (insert) operations."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"MERGE"}),": Propagates update operations."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"REMOVE"}),": Propagates delete operations."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"REFRESH"}),": Refreshes data from DB."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"DETACH"}),": Detaches the entity from persistence context."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"ALL"}),": Combines all the above."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"understanding-fetchtype",children:["Understanding ",(0,a.jsx)(n.code,{children:"FetchType"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Defines ",(0,a.jsx)(n.strong,{children:"when"})," related entities are loaded:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"EAGER"})," (default for many-to-one): Loads related entities immediately."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"LAZY"})," (default for one-to-many): Loads related entities only when accessed."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Example:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["If ",(0,a.jsx)(n.code,{children:"FetchType.LAZY"})," is set on the Department\u2019s ",(0,a.jsx)(n.code,{children:"workers"})," list:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Workers are ",(0,a.jsx)(n.strong,{children:"not fetched"})," immediately."]}),"\n",(0,a.jsxs)(n.li,{children:["When ",(0,a.jsx)(n.code,{children:".getWorkers()"})," is called, Hibernate fetches them from the DB."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"note-about-jackson-and-lazy-fetching",children:"Note About Jackson and Lazy Fetching"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Even with ",(0,a.jsx)(n.code,{children:"LAZY"})," fetch type, if you're returning the entity via a REST API:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Jackson"})," may call the getter methods (like ",(0,a.jsx)(n.code,{children:".getWorkers()"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["This triggers Hibernate to fetch data lazily \u2014 so it may seem like it is ",(0,a.jsx)(n.code,{children:"EAGER"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Best Practice:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Use ",(0,a.jsx)(n.code,{children:"LAZY"})," for better performance."]}),"\n",(0,a.jsx)(n.li,{children:"Use DTOs (Data Transfer Objects) to control what is returned in APIs."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"many-to-many-mapping-preview-freelancers",children:"Many-to-Many Mapping Preview (Freelancers)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Scenario:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Some ",(0,a.jsx)(n.code,{children:"Employee"})," instances are ",(0,a.jsx)(n.strong,{children:"Freelancers"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Freelancers can work in ",(0,a.jsx)(n.strong,{children:"multiple Departments"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["A ",(0,a.jsx)(n.code,{children:"Department"})," can have ",(0,a.jsx)(n.strong,{children:"multiple Freelancers"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["This is a perfect example of a ",(0,a.jsx)(n.strong,{children:"Many-to-Many"})," relationship."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"strategy-for-many-to-many-mapping",children:"Strategy for Many-to-Many Mapping"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["For such cases, a ",(0,a.jsx)(n.strong,{children:"join table"})," is used (not ",(0,a.jsx)(n.code,{children:"@JoinColumn"}),", but ",(0,a.jsx)(n.code,{children:"@JoinTable"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Ownership doesn't matter much here because:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Both sides (Employee and Department) are many-to-many."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Still, you need to ",(0,a.jsx)(n.strong,{children:"choose one side"})," to define the ",(0,a.jsx)(n.code,{children:"@JoinTable"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"many-to-many-mapping-freelancers-and-departments",children:"Many-to-Many Mapping: Freelancers and Departments"}),"\n",(0,a.jsxs)(n.h4,{id:"-step-1-define-many-to-many-mapping-in-employee-entity",children:["\ud83e\udde9 Step 1: Define Many-to-Many Mapping in ",(0,a.jsx)(n.code,{children:"Employee"})," Entity"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["We added a ",(0,a.jsx)(n.code,{children:"Set<Department>"})," to the ",(0,a.jsx)(n.code,{children:"Employee"})," entity to represent the departments a freelancer is associated with."]}),"\n",(0,a.jsxs)(n.li,{children:["This field is named ",(0,a.jsx)(n.code,{children:"freelanceDepartments"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Annotated it with ",(0,a.jsx)(n.code,{children:"@ManyToMany"})," and ",(0,a.jsx)(n.code,{children:"@JoinTable"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.h4,{id:"\ufe0f-step-2-configure-jointable",children:["\ud83d\udee0\ufe0f Step 2: Configure ",(0,a.jsx)(n.code,{children:"@JoinTable"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Created a join table named ",(0,a.jsx)(n.code,{children:"freelance_department_mapping"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Used ",(0,a.jsx)(n.code,{children:'@JoinColumn(name = "employee_id")'})," for the Employee side."]}),"\n",(0,a.jsxs)(n.li,{children:["Used ",(0,a.jsx)(n.code,{children:'@InverseJoinColumn(name = "department_id")'})," for the Department side."]}),"\n",(0,a.jsx)(n.li,{children:"This join table maintains the relationship between freelancers and departments."}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"-step-3-make-mapping-bi-directional-optional",children:"\ud83e\udde9 Step 3: Make Mapping Bi-Directional (Optional)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Added a ",(0,a.jsx)(n.code,{children:"Set<Employee>"})," named ",(0,a.jsx)(n.code,{children:"freelancers"})," in the ",(0,a.jsx)(n.code,{children:"Department"})," entity."]}),"\n",(0,a.jsxs)(n.li,{children:["Annotated with ",(0,a.jsx)(n.code,{children:'@ManyToMany(mappedBy = "freelanceDepartments")'}),"."]}),"\n",(0,a.jsx)(n.li,{children:"This makes the mapping two-way."}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"-step-4-creating-and-linking-data",children:"\ud83d\ude80 Step 4: Creating and Linking Data"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Created a new department and some employee records."}),"\n",(0,a.jsxs)(n.li,{children:["Used a controller method ",(0,a.jsx)(n.code,{children:"assignFreelancerToDepartment(deptId, empId)"})," to add the relationship."]}),"\n",(0,a.jsxs)(n.li,{children:["Initially, used ",(0,a.jsx)(n.code,{children:"departmentRepository.save()"})," to persist, but ran into issues."]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"\ufe0f-step-5-fixing-the-save-strategy",children:"\ud83d\udee0\ufe0f Step 5: Fixing the Save Strategy"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Since the ",(0,a.jsx)(n.strong,{children:"owning side"})," of the join table is the ",(0,a.jsx)(n.code,{children:"Employee"})," entity:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Switched the ",(0,a.jsx)(n.code,{children:"save()"})," call from ",(0,a.jsx)(n.code,{children:"Department"})," to ",(0,a.jsx)(n.code,{children:"Employee"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"This ensures the join table is updated correctly."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"-step-6-preventing-infinite-recursion",children:"\ud83d\udd01 Step 6: Preventing Infinite Recursion"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Used ",(0,a.jsx)(n.code,{children:"@JsonIgnore"})," on the mapped fields to avoid recursive JSON serialization."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"many-to-many-mapping-and-advanced-jpa-use-cases",children:"Many-to-Many Mapping and Advanced JPA Use Cases"}),"\n",(0,a.jsx)(n.h4,{id:"-adding-freelancers-to-departments",children:"\ud83e\udde9 Adding Freelancers to Departments"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'Created additional employees (e.g., "Xiaomi", "Shyam").'}),"\n",(0,a.jsx)(n.li,{children:"Added multiple employees to a department as freelancers."}),"\n",(0,a.jsxs)(n.li,{children:["Created another department, ",(0,a.jsx)(n.strong,{children:"Engineering"}),", and assigned freelancers to it."]}),"\n",(0,a.jsxs)(n.li,{children:["Demonstrated that:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["An employee can belong to ",(0,a.jsx)(n.strong,{children:"multiple departments"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["A department can have ",(0,a.jsx)(n.strong,{children:"multiple freelancers"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"verifying-data",children:"Verifying Data"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Used ",(0,a.jsx)(n.code,{children:"getDepartmentById"})," to confirm assigned freelancers."]}),"\n",(0,a.jsxs)(n.li,{children:["Verified that employee ",(0,a.jsx)(n.strong,{children:"Anu"}),' is part of both "HR" and "Engineering" departments.']}),"\n",(0,a.jsxs)(n.li,{children:["Checked database entries:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Department ID 1 \u2192 Employees 1 & 2"}),"\n",(0,a.jsx)(n.li,{children:"Department ID 2 \u2192 Employees 1 & 3"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"optional-join-table-in-one-to-many-mapping",children:"Optional: Join Table in One-to-Many Mapping"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["In the existing setup, ",(0,a.jsx)(n.code,{children:"Employee"})," stores ",(0,a.jsx)(n.code,{children:"workerDepartmentId"})," as a foreign key."]}),"\n",(0,a.jsxs)(n.li,{children:["Alternative approach: Use a ",(0,a.jsx)(n.strong,{children:"join table"})," instead of a join column for one-to-many."]}),"\n",(0,a.jsxs)(n.li,{children:["Benefits:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Keeps the ",(0,a.jsx)(n.code,{children:"Employee"})," entity clean."]}),"\n",(0,a.jsx)(n.li,{children:"Suitable when you want to separate relational data in a dedicated table."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"-implementation",children:"\ud83d\udd27 Implementation:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Replaced ",(0,a.jsx)(n.code,{children:"@JoinColumn"})," with ",(0,a.jsx)(n.code,{children:"@JoinTable"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Defined a new table: ",(0,a.jsx)(n.code,{children:"worker_department_mapping"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Result:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.code,{children:"Employee"})," table no longer contains ",(0,a.jsx)(n.code,{children:"workerDepartmentId"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"A separate table stores the mapping between Employee ID and Department ID."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"code",children:"code"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'.\n\u251c\u2500\u2500 main\n\u2502\xa0\xa0 \u251c\u2500\u2500 java\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 com\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 codingshuttle\n\u2502\xa0\xa0 \u2502\xa0\xa0         \u2514\u2500\u2500 tutorial\n\u2502\xa0\xa0 \u2502\xa0\xa0             \u2514\u2500\u2500 dataMapping\n\u2502\xa0\xa0 \u2502\xa0\xa0                 \u2514\u2500\u2500 DataMappingTutorial\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u251c\u2500\u2500 DataMappingTutorialApplication.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u251c\u2500\u2500 controllers\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2502\xa0\xa0 \u251c\u2500\u2500 DepartmentController.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeController.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u251c\u2500\u2500 entities\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2502\xa0\xa0 \u251c\u2500\u2500 DepartmentEntity.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeEntity.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u251c\u2500\u2500 repositories\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2502\xa0\xa0 \u251c\u2500\u2500 DepartmentRepository.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeRepository.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                     \u2514\u2500\u2500 services\n\u2502\xa0\xa0 \u2502\xa0\xa0                         \u251c\u2500\u2500 DepartmentService.java\n\u2502\xa0\xa0 \u2502\xa0\xa0                         \u2514\u2500\u2500 EmployeeService.java\n\u2502\xa0\xa0 \u2514\u2500\u2500 resources\n\u2502\xa0\xa0     \u2514\u2500\u2500 application.properties\n\u2514\u2500\u2500 test\n    \u2514\u2500\u2500 java\n        \u2514\u2500\u2500 com\n            \u2514\u2500\u2500 codingshuttle\n                \u2514\u2500\u2500 tutorial\n                    \u2514\u2500\u2500 dataMapping\n                        \u2514\u2500\u2500 DataMappingTutorial\n                            \u2514\u2500\u2500 DataMappingTutorialApplicationTests.java\n\n\npackage com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.util.Objects;\nimport java.util.Set;\n\n@Entity\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table(name = "employees")\npublic class EmployeeEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @OneToOne(mappedBy = "manager")\n    @JsonIgnore\n    private DepartmentEntity managedDepartment;\n\n    @ManyToOne(cascade = CascadeType.ALL)\n//    @JoinColumn(name = "worker_department_id", referencedColumnName = "id")\n    @JoinTable(name = "worker_department_id")\n    @JsonIgnore\n    private DepartmentEntity workerDepartment;\n\n    @ManyToMany\n    @JoinTable(name = "freelance_department_mapping",\n            joinColumns = @JoinColumn(name = "employee_id"),\n            inverseJoinColumns = @JoinColumn(name = "department_id")\n    )\n    @JsonIgnore\n    private Set<DepartmentEntity> freelanceDepartments;\n\n    @Override\n    public boolean equals(Object o) {\n        if (o == null || getClass() != o.getClass()) return false;\n        EmployeeEntity that = (EmployeeEntity) o;\n        return Objects.equals(getId(), that.getId()) && Objects.equals(getName(), that.getName());\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(getId(), getName());\n    }\n}\n\n\npackage com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.Set;\n\n@Entity\n@Setter\n@Getter\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = "departments")\npublic class DepartmentEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String title;\n\n    @OneToOne\n    @JoinColumn(name = "department_manager")\n    private EmployeeEntity manager;\n\n    @OneToMany(mappedBy = "workerDepartment")\n    private Set<EmployeeEntity> workers;\n\n    @ManyToMany(mappedBy = "freelanceDepartments")\n    private Set<EmployeeEntity> freelancers;\n\n    @Override\n    public boolean equals(Object o) {\n        if (o == null || getClass() != o.getClass()) return false;\n        DepartmentEntity that = (DepartmentEntity) o;\n        return Objects.equals(getId(), that.getId()) && Objects.equals(getTitle(), that.getTitle());\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(getId(), getTitle());\n    }\n}\n\n\npackage com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.controllers;\n\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.EmployeeEntity;\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.services.EmployeeService;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @GetMapping("/{employeeId}")\n    public EmployeeEntity getEmployeeById(@PathVariable Long employeeId) {\n        return employeeService.getEmployeeById(employeeId);\n    }\n\n    @PostMapping\n    public EmployeeEntity createNewEmployee(@RequestBody EmployeeEntity employeeEntity) {\n        return employeeService.createNewEmployee(employeeEntity);\n    }\n}\n\n\npackage com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.controllers;\n\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.DepartmentEntity;\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.EmployeeEntity;\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.services.DepartmentService;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(path = "/departments")\npublic class DepartmentController {\n\n    private final DepartmentService departmentService;\n\n    public DepartmentController(DepartmentService departmentService) {\n        this.departmentService = departmentService;\n    }\n\n    @GetMapping("/{departmentId}")\n    public DepartmentEntity getDepartmentById(@PathVariable Long departmentId) {\n        return departmentService.getDepartmentById(departmentId);\n    }\n\n    @PostMapping\n    public DepartmentEntity createNewDepartment(@RequestBody DepartmentEntity departmentEntity) {\n        return departmentService.createNewDepartment(departmentEntity);\n    }\n\n    @PutMapping(path = "/{departmentId}/manager/{employeeId}")\n    public DepartmentEntity assignManagerToDepartment(@PathVariable Long departmentId,\n                                                      @PathVariable Long employeeId) {\n        return departmentService.assignManagerToDepartment(departmentId, employeeId);\n    }\n\n    @GetMapping(path = "/assignedDepartmentOfManager/{employeeId}")\n    public DepartmentEntity getAssignedDepartmentOfManager( @PathVariable Long employeeId) {\n        return departmentService.getAssignedDepartmentOfManager(employeeId);\n    }\n\n    @PutMapping(path = "/{departmentId}/worker/{employeeId}")\n    public DepartmentEntity assignWorkerToDepartment(@PathVariable Long departmentId,\n                                                     @PathVariable Long employeeId) {\n        return departmentService.assignWorkerToDepartment(departmentId, employeeId);\n    }\n\n    @PutMapping(path = "/{departmentId}/freelancers/{employeeId}")\n    public DepartmentEntity assignFreelancerToDepartment(@PathVariable Long departmentId,\n                                                         @PathVariable Long employeeId) {\n        return departmentService.assignFreelancerToDepartment(departmentId, employeeId);\n    }\n}\n\n\npackage com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.repositories;\n\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.DepartmentEntity;\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.EmployeeEntity;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface EmployeeRepository extends JpaRepository<EmployeeEntity, Long> {\n}\n\n\npackage com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.repositories;\n\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.DepartmentEntity;\nimport com.codingshuttle.tutorial.dataMapping.DataMappingTutorial.entities.EmployeeEntity;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface DepartmentRepository extends JpaRepository<DepartmentEntity, Long> {\n    DepartmentEntity findByManager(EmployeeEntity employeeEntity);\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);