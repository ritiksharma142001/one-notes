"use strict";(globalThis.webpackChunkes_note=globalThis.webpackChunkes_note||[]).push([[9270],{28453(e,n,i){i.d(n,{R:()=>o,x:()=>s});var t=i(96540);const l={},r=t.createContext(l);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},41868(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"advanced-java/0-1/Week-2/2.4","title":"Service Layer","description":"Connecting the Persistence Layer and Presentation Layer Using the Service Layer","source":"@site/docs/advanced-java/0-1/Week-2/2.4.md","sourceDirName":"advanced-java/0-1/Week-2","slug":"/advanced-java/0-1/Week-2/2.4","permalink":"/one-notes/advanced-java/0-1/Week-2/2.4","draft":false,"unlisted":false,"editUrl":"https://github.com/ritiksharma142001/one-notes/edit/main/docs/advanced-java/0-1/Week-2/2.4.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Persistence Layer & JPA","permalink":"/one-notes/advanced-java/0-1/Week-2/2.3"},"next":{"title":"PUT, PATCH and DELETE Mappings","permalink":"/one-notes/advanced-java/0-1/Week-2/2.5"}}');var l=i(74848),r=i(28453);const o={sidebar_position:4},s="Service Layer",a={},c=[{value:"Connecting the Persistence Layer and Presentation Layer Using the Service Layer",id:"connecting-the-persistence-layer-and-presentation-layer-using-the-service-layer",level:2},{value:"Introduction",id:"introduction",level:3},{value:"Current Project Structure",id:"current-project-structure",level:3},{value:"Why We Need the Service Layer",id:"why-we-need-the-service-layer",level:3},{value:"Key Responsibilities of the Service Layer",id:"key-responsibilities-of-the-service-layer",level:3},{value:"Separation of Concerns",id:"separation-of-concerns",level:3},{value:"Real-World Scenario",id:"real-world-scenario",level:3},{value:"Advantages of Using the Service Layer",id:"advantages-of-using-the-service-layer",level:3},{value:"Steps to Implement the Service Layer",id:"steps-to-implement-the-service-layer",level:2},{value:"Navigate to the Service Package",id:"navigate-to-the-service-package",level:3},{value:"Create an Employee Service Class",id:"create-an-employee-service-class",level:3},{value:"nnotate the Service Class",id:"nnotate-the-service-class",level:3},{value:"Move Business Logic from Controller to Service",id:"move-business-logic-from-controller-to-service",level:3},{value:"Refactor Controller to Use Service",id:"refactor-controller-to-use-service",level:3},{value:"Create Method in Service Layer",id:"create-method-in-service-layer",level:3},{value:"Call Service Method from Controller",id:"call-service-method-from-controller",level:3},{value:"Inject Repository in Service Layer",id:"inject-repository-in-service-layer",level:3},{value:"Handle Optional Return Type",id:"handle-optional-return-type",level:3},{value:"Avoid Returning Entity from Controller",id:"avoid-returning-entity-from-controller",level:3},{value:"DTO Mapping and ModelMapper in Service Layer",id:"dto-mapping-and-modelmapper-in-service-layer",level:2},{value:"Identifying the Problem",id:"identifying-the-problem",level:3},{value:"Repository Removed, But Entities Still in Use",id:"repository-removed-but-entities-still-in-use",level:3},{value:"Best Practice: No Entity Exposure in Controller",id:"best-practice-no-entity-exposure-in-controller",level:3},{value:"Why This Is a Problem",id:"why-this-is-a-problem",level:3},{value:"Manual Conversion Approach",id:"manual-conversion-approach",level:3},{value:"Drawbacks of Manual Mapping",id:"drawbacks-of-manual-mapping",level:3},{value:"Solution: Use a Mapping Library",id:"solution-use-a-mapping-library",level:3},{value:"Step 1: Adding the ModelMapper Dependency",id:"step-1-adding-the-modelmapper-dependency",level:3},{value:"Step 2: Understanding How ModelMapper Works",id:"step-2-understanding-how-modelmapper-works",level:3},{value:"Step 3: Basic Usage of ModelMapper",id:"step-3-basic-usage-of-modelmapper",level:3},{value:"Reusing ModelMapper in Multiple Places",id:"reusing-modelmapper-in-multiple-places",level:3},{value:"Step 4: Spring-Style ModelMapper Configuration",id:"step-4-spring-style-modelmapper-configuration",level:3},{value:"Next Steps",id:"next-steps",level:3},{value:"Now You Can Autowire It",id:"now-you-can-autowire-it",level:3},{value:"Inject the Bean into the Service Class",id:"inject-the-bean-into-the-service-class",level:3},{value:"Why Constructor Injection?",id:"why-constructor-injection",level:3},{value:"Converting Entity List to DTO List Using Stream API",id:"converting-entity-list-to-dto-list-using-stream-api",level:3},{value:"Explanation",id:"explanation",level:3},{value:"code",id:"code",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"service-layer",children:"Service Layer"})}),"\n",(0,l.jsx)(n.h2,{id:"connecting-the-persistence-layer-and-presentation-layer-using-the-service-layer",children:"Connecting the Persistence Layer and Presentation Layer Using the Service Layer"}),"\n",(0,l.jsx)(n.h3,{id:"introduction",children:"Introduction"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In today's class, we will learn how to connect the Persistence Layer and the Presentation Layer with the help of the Service Layer."}),"\n",(0,l.jsx)(n.li,{children:"The Service Layer acts as a bridge between the Persistence Layer and the Presentation Layer."}),"\n",(0,l.jsx)(n.li,{children:"It helps improve the modularity, scalability, and testability of the application."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"current-project-structure",children:"Current Project Structure"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"So far, we have seen how Controllers, Repositories, DTOs, and Entities work."}),"\n",(0,l.jsx)(n.li,{children:"Currently, we are directly passing the instance of the repository into the controller."}),"\n",(0,l.jsx)(n.li,{children:"This practice is not recommended, as it tightly couples the controller with the repository."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"why-we-need-the-service-layer",children:"Why We Need the Service Layer"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"There should be a middle layer between the controller and the repository \u2013 this is the Service Layer."}),"\n",(0,l.jsx)(n.li,{children:"It ensures that your code remains modular and separated by concerns."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"key-responsibilities-of-the-service-layer",children:"Key Responsibilities of the Service Layer"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Acts as a Bridge","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Connects the Persistence Layer (Repository) with the Presentation Layer (Controller)."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Encapsulates Business Logic","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Contains all business rules and operations, such as conditional logic, data manipulation, and validation."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Coordinates Component Interaction","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Manages and orchestrates the interactions between different components in a clean and maintainable way."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Provides a Unified Interface","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Offers a centralized and consistent way for external clients (like controllers) to interact with business functionality."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"separation-of-concerns",children:"Separation of Concerns"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The Controller Layer handles client interactions (e.g., HTTP requests)."}),"\n",(0,l.jsx)(n.li,{children:"The Persistence Layer handles interactions with the database."}),"\n",(0,l.jsxs)(n.li,{children:["The Service Layer handles all the business logic, including:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If-else conditions"}),"\n",(0,l.jsx)(n.li,{children:"Custom rules provided by product managers"}),"\n",(0,l.jsx)(n.li,{children:"Logging"}),"\n",(0,l.jsx)(n.li,{children:"Security checks"}),"\n",(0,l.jsx)(n.li,{children:"Authentication and authorization"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"real-world-scenario",children:"Real-World Scenario"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Suppose we have two controllers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"EmployeeController"}),"\n",(0,l.jsx)(n.li,{children:"DepartmentController"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"The DepartmentController needs access to data from the EmployeeRepository."}),"\n",(0,l.jsxs)(n.li,{children:["Instead of injecting the EmployeeRepository directly into both controllers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"We create an EmployeeService class."}),"\n",(0,l.jsxs)(n.li,{children:["This service:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Calls the EmployeeRepository"}),"\n",(0,l.jsx)(n.li,{children:"Performs logging"}),"\n",(0,l.jsx)(n.li,{children:"Handles authentication"}),"\n",(0,l.jsx)(n.li,{children:"Implements additional business logic"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Now, instead of repeating the same logic (like logging or authentication) in every controller, we centralize it in the service."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"advantages-of-using-the-service-layer",children:"Advantages of Using the Service Layer"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Avoids Code Duplication","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Logic like logging or security checks is written once and reused across multiple controllers."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Increases Modularity","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Services are modular and reusable in different parts of the application."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Follows DRY Principle","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:'"Don\'t Repeat Yourself" \u2013 encourages clean and maintainable code.'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Improves Scalability","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"As the application grows, services can easily be extended without affecting controllers or repositories."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"steps-to-implement-the-service-layer",children:"Steps to Implement the Service Layer"}),"\n",(0,l.jsx)(n.h3,{id:"navigate-to-the-service-package",children:"Navigate to the Service Package"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to the previously created ",(0,l.jsx)(n.code,{children:"service"})," package in your project structure."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"create-an-employee-service-class",children:"Create an Employee Service Class"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Create a new class named ",(0,l.jsx)(n.code,{children:"EmployeeService"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"This class will contain all the business logic related to employee operations."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"nnotate-the-service-class",children:"nnotate the Service Class"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Annotate the class with ",(0,l.jsx)(n.code,{children:"@Service"})," to mark it as a Spring-managed component (bean)."]}),"\n",(0,l.jsx)(n.li,{children:"This enables Spring to auto-detect and inject this service into other components like controllers."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"move-business-logic-from-controller-to-service",children:"Move Business Logic from Controller to Service"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Previously, methods such as ",(0,l.jsx)(n.code,{children:"findEmployeeById"})," were present in the controller using the ",(0,l.jsx)(n.code,{children:"EmployeeRepository"})," directly."]}),"\n",(0,l.jsx)(n.li,{children:"This is not a recommended practice as it tightly couples the controller to the persistence layer."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"refactor-controller-to-use-service",children:"Refactor Controller to Use Service"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Remove ",(0,l.jsx)(n.code,{children:"EmployeeRepository"})," from the controller."]}),"\n",(0,l.jsxs)(n.li,{children:["Inject ",(0,l.jsx)(n.code,{children:"EmployeeService"})," into the controller using constructor injection."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"private final EmployeeService employeeService;\n\npublic EmployeeController(EmployeeService employeeService) {\n    this.employeeService = employeeService;\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"create-method-in-service-layer",children:"Create Method in Service Layer"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Move the repository call ",(0,l.jsx)(n.code,{children:"employeeRepository.findById(id)"})," to the service layer."]}),"\n",(0,l.jsxs)(n.li,{children:["Create a method like ",(0,l.jsx)(n.code,{children:"getEmployeeById(Long id)"})," inside ",(0,l.jsx)(n.code,{children:"EmployeeService"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"public Employee getEmployeeById(Long id) {\n    return employeeRepository.findById(id).orElse(null);\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"call-service-method-from-controller",children:"Call Service Method from Controller"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["In the controller, call ",(0,l.jsx)(n.code,{children:"employeeService.getEmployeeById(id)"})," instead of directly accessing the repository."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"inject-repository-in-service-layer",children:"Inject Repository in Service Layer"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Use constructor injection to inject ",(0,l.jsx)(n.code,{children:"EmployeeRepository"})," in the ",(0,l.jsx)(n.code,{children:"EmployeeService"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"private final EmployeeRepository employeeRepository;\n\npublic EmployeeService(EmployeeRepository employeeRepository) {\n    this.employeeRepository = employeeRepository;\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u251c\u2500\u2500 SpringBootWebApplication.java\n\u251c\u2500\u2500 configs\n\u251c\u2500\u2500 controllers\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeController.java\n\u251c\u2500\u2500 dto\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeDTO.java\n\u251c\u2500\u2500 entities\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeEntity.java\n\u251c\u2500\u2500 repositories\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeRepository.java\n\u251c\u2500\u2500 services\n\u2502\xa0\xa0 \u2514\u2500\u2500 EmployeeService.java\n\u2514\u2500\u2500 utils"}),"\n",(0,l.jsx)(n.h3,{id:"handle-optional-return-type",children:"Handle Optional Return Type"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Handle the case where the employee may not be found:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Either return null (temporarily)."}),"\n",(0,l.jsx)(n.li,{children:"Or use orElseThrow() to throw a custom exception (exception handling will be added later)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"avoid-returning-entity-from-controller",children:"Avoid Returning Entity from Controller"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Best practice: do not return entities from controller directly."}),"\n",(0,l.jsx)(n.li,{children:"Instead, convert Entity to DTO inside the service layer."}),"\n",(0,l.jsx)(n.li,{children:"DTO conversion will be handled in a later section."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'package com.example.springBootWeb.springBootWeb.controllers;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport com.example.springBootWeb.springBootWeb.services.EmployeeService;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n\n    @GetMapping(path = "/{employeeId}")\n    public EmployeeEntity getEmployeeById(@PathVariable(name = "employeeId") Long id) {\n        return employeeService.getEmployeeById(id);\n    }\n\n    @GetMapping\n    public List<EmployeeEntity> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                @RequestParam(required = false) String sortBy) {\n        return employeeService.getAllEmployees();\n    }\n\n    @PostMapping\n    public EmployeeEntity createNewEmployee(@RequestBody EmployeeEntity inputEmployee) {\n        return employeeService.createNewEmployee(inputEmployee);\n    }\n\n    @PutMapping String updateEmployeeById() {\n        return "Hello from Put";\n    }\n\n}\n\n\npackage com.example.springBootWeb.springBootWeb.services;\n\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\n\nimport java.util.List;\n\npublic class EmployeeService {\n\n    private final EmployeeRepository employeeRepository;\n\n    public EmployeeService(EmployeeRepository employeeRepository) {\n        this.employeeRepository = employeeRepository;\n    }\n\n    public EmployeeEntity getEmployeeById(Long id) {\n        return employeeRepository.findById(id).orElse(null);\n    }\n\n    public List<EmployeeEntity> getAllEmployees() {\n        return employeeRepository.findAll();\n    }\n\n    public EmployeeEntity createNewEmployee(EmployeeEntity inputEmployee) {\n        return employeeRepository.save(inputEmployee);\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"dto-mapping-and-modelmapper-in-service-layer",children:"DTO Mapping and ModelMapper in Service Layer"}),"\n",(0,l.jsx)(n.h3,{id:"identifying-the-problem",children:"Identifying the Problem"}),"\n",(0,l.jsx)(n.h3,{id:"repository-removed-but-entities-still-in-use",children:"Repository Removed, But Entities Still in Use"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Although we have successfully removed the use of EmployeeRepository from the controller and introduced EmployeeService, there is still an issue."}),"\n",(0,l.jsx)(n.li,{children:"The controller is still using the Employee entity directly."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"best-practice-no-entity-exposure-in-controller",children:"Best Practice: No Entity Exposure in Controller"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["According to clean architecture principles:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The controller (presentation layer) must not deal with Entity classes."}),"\n",(0,l.jsx)(n.li,{children:"It should interact only with DTOs (Data Transfer Objects)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"why-this-is-a-problem",children:"Why This Is a Problem"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Entities Still Returned by Service","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Service methods such as getEmployeeById() return an Employee entity."}),"\n",(0,l.jsx)(n.li,{children:"The controller receives the entity and returns it in the API response \u2014 this violates encapsulation."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Need for DTO Conversion","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"We should convert the Employee entity into an EmployeeDTO within the service layer, and then return the DTO to the controller."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"manual-conversion-approach",children:"Manual Conversion Approach"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Example: Manual Mapping from Entity to DTO"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"public EmployeeDTO getEmployeeById(Long id) {\n    Employee employee = employeeRepository.findById(id).orElse(null);\n    return new EmployeeDTO(employee.getId(), employee.getName(), employee.getEmail());\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"drawbacks-of-manual-mapping",children:"Drawbacks of Manual Mapping"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Manual mapping works, but it becomes repetitive and error-prone:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You must manually map each field from entity to DTO and vice versa."}),"\n",(0,l.jsx)(n.li,{children:"With multiple entities and DTOs, this logic becomes redundant and scattered."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["For example, similar code will be required:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In getAllEmployees()"}),"\n",(0,l.jsx)(n.li,{children:"In createEmployee()"}),"\n",(0,l.jsx)(n.li,{children:"And for every future entity you add"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"solution-use-a-mapping-library",children:"Solution: Use a Mapping Library"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Use of ModelMapper","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To solve the problem of repeated conversion logic, we can use a popular mapping library called ModelMapper."}),"\n",(0,l.jsx)(n.li,{children:"ModelMapper automatically maps fields between Entity and DTO classes based on matching field names."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-1-adding-the-modelmapper-dependency",children:"Step 1: Adding the ModelMapper Dependency"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Locate the Dependency"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Search for ModelMapper Maven in your browser."}),"\n",(0,l.jsx)(n.li,{children:"You can find the official website or the Maven repository listing."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Add to pom.xml"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Copy the ModelMapper dependency (e.g., version 3.0.0)."}),"\n",(0,l.jsx)(n.li,{children:"Paste it inside your pom.xml file."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Refresh Maven"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"After adding the dependency, refresh your pom.xml in the IDE."}),"\n",(0,l.jsx)(n.li,{children:"This downloads the required ModelMapper library."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-2-understanding-how-modelmapper-works",children:"Step 2: Understanding How ModelMapper Works"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Purpose of ModelMapper","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"It helps convert one type of object to another, e.g., Entity \u2194 DTO."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Matching Fields Automatically","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"ModelMapper scans the fields in both classes."}),"\n",(0,l.jsx)(n.li,{children:"If fields with the same name and compatible types exist, it automatically maps them."}),"\n",(0,l.jsxs)(n.li,{children:["Example:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Employee entity has: id, name, email, age."}),"\n",(0,l.jsx)(n.li,{children:"EmployeeDTO has matching fields."}),"\n",(0,l.jsx)(n.li,{children:"ModelMapper will map values from entity to DTO automatically."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-3-basic-usage-of-modelmapper",children:"Step 3: Basic Usage of ModelMapper"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Initialize the Mapper"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"ModelMapper mapper = new ModelMapper();\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Perform Mapping"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"EmployeeDTO dto = mapper.map(employeeEntity, EmployeeDTO.class);\nreturn dto;\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Outcome","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"This will return a DTO object instead of an entity."}),"\n",(0,l.jsx)(n.li,{children:"The controller now receives a DTO, not an entity, which aligns with best practices."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"reusing-modelmapper-in-multiple-places",children:"Reusing ModelMapper in Multiple Places"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Why Reuse Is Needed","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["You may need to convert:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A single entity \u2192 DTO"}),"\n",(0,l.jsx)(n.li,{children:"A list of entities \u2192 list of DTOs"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Example:"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["In ",(0,l.jsx)(n.code,{children:"getAllEmployees()"}),", convert ",(0,l.jsx)(n.code,{children:"List<Employee>"})," to ",(0,l.jsx)(n.code,{children:"List<EmployeeDTO>"}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Avoid Repeating new ",(0,l.jsx)(n.code,{children:"ModelMapper()"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Reinitializing the object every time is not recommended in Spring."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-4-spring-style-modelmapper-configuration",children:"Step 4: Spring-Style ModelMapper Configuration"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Spring Best Practice","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Instead of manually creating objects, define a ModelMapper bean."}),"\n",(0,l.jsx)(n.li,{children:"This allows Spring to manage its lifecycle and inject it wherever needed."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to the configuration class (usually named AppConfig, MapperConfig, etc.)."}),"\n",(0,l.jsx)(n.li,{children:"Define a bean for ModelMapper."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"@Configuration\npublic class AppConfig {\n\n    @Bean\n    public ModelMapper modelMapper() {\n        return new ModelMapper();\n    }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"now-you-can-autowire-it",children:"Now You Can Autowire It"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"@Autowired\nprivate ModelMapper modelMapper;\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use it wherever needed without creating a new instance each time."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"inject-the-bean-into-the-service-class",children:"Inject the Bean into the Service Class"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use constructor injection for better immutability and testability."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"private final ModelMapper modelMapper;\n\n@Autowired\npublic EmployeeService(ModelMapper modelMapper) {\n    this.modelMapper = modelMapper;\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"why-constructor-injection",children:"Why Constructor Injection?"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensures ModelMapper is available at runtime."}),"\n",(0,l.jsx)(n.li,{children:"Avoids repeatedly creating new objects."}),"\n",(0,l.jsx)(n.li,{children:"Lets Spring handle the lifecycle of the dependency."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"converting-entity-list-to-dto-list-using-stream-api",children:"Converting Entity List to DTO List Using Stream API"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Fetch Entity List"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"List<Employee> employeeEntities = employeeRepository.findAll();\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"List<EmployeeDTO> employeeDTOs = employeeEntities.stream()\n    .map(employee -> modelMapper.map(employee, EmployeeDTO.class))\n    .collect(Collectors.toList());\n"})}),"\n",(0,l.jsx)(n.h3,{id:"explanation",children:"Explanation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"stream() converts the list to a stream."}),"\n",(0,l.jsx)(n.li,{children:"map() applies the mapping function to each entity."}),"\n",(0,l.jsx)(n.li,{children:"collect(Collectors.toList()) gathers the mapped DTOs into a list."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"code",children:"code"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'package com.example.springBootWeb.springBootWeb.controllers;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport com.example.springBootWeb.springBootWeb.services.EmployeeService;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@RestController\n@RequestMapping(path = "/employees")\npublic class EmployeeController {\n\n//    @GetMapping(path = "/getSecretMessage")\n//    public String getMySuperSecretMessage() {\n//        return "Secret message: asdfal@#$DASD";\n//    }\n\n\n    private final EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n\n    @GetMapping(path = "/{employeeId}")\n    public EmployeeDTO getEmployeeById(@PathVariable(name = "employeeId") Long id) {\n        return employeeService.getEmployeeById(id);\n    }\n\n    @GetMapping\n    public List<EmployeeDTO> getAllEmployees(@RequestParam(required = false, name = "inputAge") Integer age,\n                                                @RequestParam(required = false) String sortBy) {\n        return employeeService.getAllEmployees();\n    }\n\n    @PostMapping\n    public EmployeeDTO createNewEmployee(@RequestBody EmployeeDTO inputEmployee) {\n        return employeeService.createNewEmployee(inputEmployee);\n    }\n\n    @PutMapping String updateEmployeeById() {\n        return "Hello from Put";\n    }\n\n}\n\npackage com.example.springBootWeb.springBootWeb.services;\n\nimport com.example.springBootWeb.springBootWeb.dto.EmployeeDTO;\nimport com.example.springBootWeb.springBootWeb.entities.EmployeeEntity;\nimport com.example.springBootWeb.springBootWeb.repositories.EmployeeRepository;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Service\npublic class EmployeeService {\n\n    private final EmployeeRepository employeeRepository;\n\n    private final ModelMapper modelMapper;\n\n    public EmployeeService(EmployeeRepository employeeRepository, ModelMapper modelMapper) {\n        this.employeeRepository = employeeRepository;\n        this.modelMapper = modelMapper;\n    }\n\n    public EmployeeDTO getEmployeeById(Long id) {\n        EmployeeEntity employeeEntity =  employeeRepository.findById(id).orElse(null);\n        return modelMapper.map(employeeEntity, EmployeeDTO.class);\n    }\n\n    public List<EmployeeDTO> getAllEmployees() {\n        List<EmployeeEntity> employeeEntities =  employeeRepository.findAll();\n        return employeeEntities\n                .stream()\n                .map(employeeEntity -> modelMapper.map(employeeEntity, EmployeeDTO.class))\n                .collect(Collectors.toList());\n    }\n\n    public EmployeeDTO createNewEmployee(EmployeeDTO inputEmployee) {\n        EmployeeEntity toSaveEntity = modelMapper.map(inputEmployee, EmployeeEntity.class);\n        EmployeeEntity savedEmployeeEntities = employeeRepository.save(toSaveEntity);\n        return modelMapper.map(savedEmployeeEntities, EmployeeDTO.class);\n    }\n}\n\n\nspring.application.name=springBootWeb\n\nspring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:file:/Users/ritik/Documents/db\nspring.datasource.username=ritik\nspring.datasource.password=ritik\nspring.jpa.hibernate.ddl-auto=create\n\n\n\npackage com.example.springBootWeb.springBootWeb.entities;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.time.LocalDate;\n\n@Entity\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = "employees")\npublic class EmployeeEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String name;\n    private String email;\n    private Integer age;\n    private LocalDate dateOfJoining;\n    private Boolean isActive;\n}\n\n\npackage com.example.springBootWeb.springBootWeb.dto;\n\nimport java.time.LocalDate;\n\npublic class EmployeeDTO {\n\n    private Long id;\n    private String name;\n    private String email;\n    private Integer age;\n    private LocalDate dateOfJoining;\n    private Boolean isActive;\n\n    public EmployeeDTO(){\n\n    }\n    public EmployeeDTO(Long id, String name, String email, Integer age, LocalDate dateOfJoining, Boolean isActive) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n        this.age = age;\n        this.dateOfJoining = dateOfJoining;\n        this.isActive = isActive;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public Integer getAge() {\n        return age;\n    }\n\n    public void setAge(Integer age) {\n        this.age = age;\n    }\n\n    public LocalDate getDateOfJoining() {\n        return dateOfJoining;\n    }\n\n    public void setDateOfJoining(LocalDate dateOfJoining) {\n        this.dateOfJoining = dateOfJoining;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean active) {\n        isActive = active;\n    }\n}\n\n\npackage com.example.springBootWeb.springBootWeb.configs;\n\nimport org.modelmapper.ModelMapper;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class MapperConfig {\n    @Bean\n    public ModelMapper getModelMapper(){\n        return new ModelMapper();\n    }\n}\n\n\n<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\n\t\t\x3c!-- https://mvnrepository.com/artifact/com.h2database/h2 --\x3e\n\t\t<dependency>\n\t\t\t<groupId>com.h2database</groupId>\n\t\t\t<artifactId>h2</artifactId>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.projectlombok</groupId>\n\t\t\t<artifactId>lombok</artifactId>\n\t\t</dependency>\n\t\t\x3c!-- https://mvnrepository.com/artifact/org.modelmapper/modelmapper --\x3e\n\t\t<dependency>\n\t\t\t<groupId>org.modelmapper</groupId>\n\t\t\t<artifactId>modelmapper</artifactId>\n\t\t\t<version>3.2.3</version>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-data-jpa</artifactId>\n\t\t</dependency>\n\n'})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}}}]);